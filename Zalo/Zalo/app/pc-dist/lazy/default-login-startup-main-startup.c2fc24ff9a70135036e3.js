(this.webpackJsonp=this.webpackJsonp||[]).push([[13],{"4Vil":function(e,t,s){"use strict";var n=s("T0aS"),i=s("jDHv");class r extends n.b{setSession(e){this.isNewSession(e)&&($zsessionManager.authenticate(e),super.setSession(e))}}i.ModuleContainer.registerSingleton(n.a,r)},"5lV7":function(e,t,s){"use strict";var n,i=s("wH4e"),r=s("ggcH"),a=s("zmG6"),o=s("LW7J"),c=s("jDHv"),d=s("fc/q"),l=s("J25b"),u=s("AH6j"),h=s("Mgpg");var p=function(e){return e.IDLE="IDLE",e.CHECKING="CHECKING",e.STOP="STOP",e}(p||{});let b=Object(c.injectable)()(n=function(e,t){return Object(c.inject)(h.ZLoggerFactory)(e,void 0,0)}(n=function(e,t){return Object(c.inject)(d.b)(e,void 0,1)}(n=function(e,t){return Object(c.inject)(l.b)(e,void 0,2)}(n=Reflect.metadata("design:type",Function)(n=Reflect.metadata("design:paramtypes",[void 0===h.ZLoggerFactory?Object:h.ZLoggerFactory,"undefined"==typeof IQosService?Object:IQosService,"undefined"==typeof ISystemTime?Object:ISystemTime])(n=class extends u.b{constructor(e,t,s){super(),this.adapterType=i.a.IDB,this.logger=void 0,this.qos=void 0,this.systemTime=void 0,this.state=void 0,this.lastTsStartCheck=0,this.intervalCheckDBCorruption=null,this.hasCorruptedThisSession=void 0,this.processRequestRestartAppForBackup=(e,t)=>{this.submitReportCorruption(o.e,a.c.RESET_COUNTER),this.dispatchEvent(new r.IndexedDBCorruptionDetectedEvent(this.lastTsStartCheck,t))},this.logger=e.createZLogger("db-corruption-detector",["renderer","indexedDB-adapter"]),this.qos=t,this.systemTime=s,this.state=p.IDLE,this.hasCorruptedThisSession=!1}start(){this.checkStartUp(),this.startIntervalCheck(),$zsub.$zapp.onRequestRestartAppForBackup(this.processRequestRestartAppForBackup)}stop(){this.stopIntervalCheckDBCorruption(),$zsub.$zapp.removeListenBackupRestartReq(this.processRequestRestartAppForBackup),this.logger.zsymb(0,"oomVXT","IndexedDBCorruptionDetector stopped")}checkStartUp(){this.checkDatabase(a.b.STARTUP)}startIntervalCheck(){this.logger.zsymb(0,"p_z0JZ","Start interval check database corruption"),this.intervalCheckDBCorruption&&clearInterval(this.intervalCheckDBCorruption),this.intervalCheckDBCorruption=setInterval((()=>{this.checkDatabase(a.b.INTERVAL)}),12e5)}stopIntervalCheckDBCorruption(){this.intervalCheckDBCorruption&&(clearInterval(this.intervalCheckDBCorruption),this.intervalCheckDBCorruption=null),this.logger.zsymb(0,"V7Codp","Stop interval check database corruption")}corruptionHasOccurred(){return this.hasCorruptedThisSession}forceCheckDBCorruption(){return this.checkDatabase(a.b.FORCE_CHECK)}async checkDatabase(e){if(this.state===p.STOP)return;if(this.state===p.CHECKING)return void this.logger.zsymb(0,"F0Aihf",`Checking... Entry check: ${e}`);this.state=p.CHECKING,this.logger.zsymb(0,"tNqVoo",`Let start check database. Entry check: ${e}`),this.lastTsStartCheck=this.systemTime.getTimeNow();const t=await $zdb.getIDBDatabaseHealthStatus(),s=this.isCorruption(t);this.state=p.IDLE,this.submitReportCorruption(e,t),s&&(this.state=p.STOP,this.logger.zsymb(18,"lIF2M-",`Corruption detected. Entry check: ${e}`),this.stopIntervalCheckDBCorruption(),this.hasCorruptedThisSession=!0,$zapp.notifyDbFail(),$zapp.notifyDbCorruption())}submitReportCorruption(e,t){const s=o.c[e];this.qos.log({success:!1,commandId:s,subCommandId:0,errorCode:t,duration:0,startTime:0}),this.logger.zsymb(18,"kQbS4v",`Submit report database corruption. ${e}::${s}`)}isCorruption(e){switch(e){case a.c.RESET_COUNTER:return!0;case a.c.INVALID_COUNTER:case a.c.OK:default:return!1}}})||n)||n)||n)||n)||n)||n;c.ModuleContainer.registerSingleton(r.TDBCorruptionDetectorAdapter,b);var g,m=s("Ilem"),v=(s("Ofqi"),s("aEKn")),C=s("1pet");let O=Object(c.injectable)()(g=function(e,t){return Object(c.inject)(h.ZLoggerFactory)(e,void 0,0)}(g=function(e,t){return Object(c.inject)(d.b)(e,void 0,1)}(g=function(e,t){return Object(c.inject)(l.b)(e,void 0,2)}(g=Reflect.metadata("design:type",Function)(g=Reflect.metadata("design:paramtypes",[void 0===h.ZLoggerFactory?Object:h.ZLoggerFactory,"undefined"==typeof IQosService?Object:IQosService,"undefined"==typeof ISystemTime?Object:ISystemTime])(g=class extends u.b{constructor(e,t,s){super(),this.adapterType=i.a.SQLite,this.logger=void 0,this.qos=void 0,this.systemTime=void 0,this.hasCorruptedThisSession=void 0,this.handleCorruptionEvent=e=>{this.hasCorruptedThisSession=!0,this.logger.zsymb(18,"9Z77Qf","Corruption detected, corruption info",JSON.stringify(e.corruptionInfo)),this.dispatchEvent(new r.SQLiteDBCorruptionDetectedEvent(this.systemTime.getTimeNow(),e.corruptionInfo)),this.submitReportCorruption(e.corruptionInfo)},this.logger=e.createZLogger("db-corruption-detector",["renderer","sqlite-adapter"]),this.qos=t,this.systemTime=s,this.hasCorruptedThisSession=!1}corruptionHasOccurred(){return this.hasCorruptedThisSession}async forceCheckDBCorruption(){}start(){v.a.getInstance().addEventListener("corruption",this.handleCorruptionEvent)}stop(){v.a.getInstance().removeEventListener("corruption",this.handleCorruptionEvent),this.logger.zsymb(0,"40gnNs","SQLiteDBCorruptionDetector stopped")}submitReportCorruption(e){const{commandId:t,errorCode:s}=this.getQosInfo(e);this.qos.log({success:!1,commandId:t,subCommandId:0,errorCode:s,duration:0,startTime:0}),this.logger.zsymb(18,"wEtYwp","Submit report database corruption")}getQosInfo(e){var t,s;if("Message"===e.databaseCorruptInfo.table){const t=(()=>{const[t]=e.databaseCorrupt.split("/").slice(-1);return t.startsWith(C.GROUPID_PREFIX)})();return{commandId:o.d.CORRUPTION_TABLE_MESSAGE,errorCode:t?o.b.Group:o.b.OneOne}}return e.type===m.a.FULL?{commandId:o.d.CORRUPTION_IMPACT_FULL,errorCode:null!==(s=o.a[e.databaseCorruptInfo.database])&&void 0!==s?s:-1}:{commandId:o.d.CORRUPTION_IMPACT_PARTIAL,errorCode:null!==(t=o.a[e.databaseCorruptInfo.database])&&void 0!==t?t:-1}}})||g)||g)||g)||g)||g)||g;c.ModuleContainer.registerSingleton(r.TDBCorruptionDetectorAdapter,O)},"9AEM":function(e,t,s){"use strict";var n,i=s("ggcH"),r=s("wH4e"),a=s("pAGP"),o=s("zmG6"),c=s("jDHv"),d=s("AH6j"),l=s("Mgpg"),u=s("T0aS"),h=s("Jz/+");let p=Object(c.injectable)()(n=function(e,t){return Object(c.inject)(l.ZLoggerFactory)(e,void 0,0)}(n=Reflect.metadata("design:type",Function)(n=Reflect.metadata("design:paramtypes",[void 0===l.ZLoggerFactory?Object:l.ZLoggerFactory])(n=class extends d.b{constructor(e){super(),this.logger=void 0,this.corruptionDetectorAdapters=void 0,this.handleCorruptionEvent=e=>{this.logger.zsymb(0,"5SEidO","Corrupt occurs"),this.dispatchEvent(e)},this.logger=e.createZLogger("db-corruption-detector",[]),this.corruptionDetectorAdapters=new Map,this.startDetectForSharedDB();c.ModuleContainer.resolve(u.a).addEventListener(h.a.SessionChange,(async({session:e})=>{null!==e&&this.startDetectForUserScopedDB(e.userId)}))}getAdapter(e){return c.ModuleContainer.resolveAll(i.TDBCorruptionDetectorAdapter).find((t=>t.adapterType===e))}async startDetect(e){if(!c.ModuleContainer.isRegistered(i.TDBCorruptionDetectorAdapter))return void this.logger.zsymb(0,"DaKPY9","Skip track corrupt, no available adapters.");const t=this.getAdapter(e);t&&!this.corruptionDetectorAdapters.has(e)&&(this.corruptionDetectorAdapters.set(e,t),t.addEventListener(o.a.DB_CORRUPTION_DETECTED,this.handleCorruptionEvent),t.start())}async startDetectForSharedDB(){const e=await c.ModuleContainer.resolve(a.a).getAdapterTypeOfSharedDatabases();this.startDetect(e)}async startDetectForUserScopedDB(e){const t=await c.ModuleContainer.resolve(a.a).getAdapterTypeOfUserScopedDatabases(e);this.startDetect(t)}async forceCheckDBCorruption(){this.logger.zsymb(0,"2S9_9-","forceCheckDBCorruption"),this.corruptionDetectorAdapters.forEach((e=>e.forceCheckDBCorruption()))}async forceCheckDBCorruptionFor(e){switch(this.logger.zsymb(0,"qVBmhi","forceCheckDBCorruptionFor",e),e){case r.a.IDB:{const t=this.getAdapter(e);if(!t){this.logger.zsymb(0,"cTehlU","Adapter not found",e);break}await t.forceCheckDBCorruption(),t.corruptionHasOccurred()&&this.handleCorruptionEvent(new i.IndexedDBCorruptionDetectedEvent(Date.now(),!1));break}default:throw new Error("Not support"+e)}}corruptionHasOccurred(){let e=!1;return this.corruptionDetectorAdapters.forEach((t=>{e=e||t.corruptionHasOccurred()})),e}})||n)||n)||n)||n;c.ModuleContainer.registerSingleton(i.TDBCorruptionDetector,p),c.ModuleContainer.resolve(i.TDBCorruptionDetector)},B3nq:function(e,t,s){"use strict";var n=s("jDHv"),i=s("8/YW"),r=(s("jw3m"),s("Y58e")),a=s("UGJm");let o=function(e){return e.Idle="idle",e.Active="active",e}({});var c=s("AH6j");let d=function(e){return e[e.idle=0]="idle",e[e.active=1]="active",e}({});class l extends c.b{constructor(e){super(),this.status=d.active,this.window=void 0,this.idleDelay=void 0,this.minimumIdlePeriod=void 0,this.lastIdleTime=void 0,this.focusStateChangeDebounceTimer=void 0,this.handleDocumentBlur=()=>{this.resetFocusStateChangeDebounceTimer(),this.focusStateChangeDebounceTimer=setTimeout((()=>{this.setStateToIdle()}),this.idleDelay)},this.handleDocumentFocus=()=>{this.resetFocusStateChangeDebounceTimer(),this.setStateToActive()},this.idleDelay=e.idleDelay,this.minimumIdlePeriod=e.minimumIdlePeriod,this.window=e.window||window,this.lastIdleTime=0,this.focusStateChangeDebounceTimer=null}start(){this.window.addEventListener("blur",this.handleDocumentBlur),this.window.addEventListener("focus",this.handleDocumentFocus)}stop(){this.window.removeEventListener("blur",this.handleDocumentBlur),this.window.removeEventListener("focus",this.handleDocumentFocus)}onIdle(e){return this.addEventListener(o.Idle,e)}setStateToActive(){this.status!==d.idle||(this.status=d.active,this.dispatchEvent(new Event(o.Active)))}setStateToIdle(){if(this.status!==d.active)return;this.isThrottlingIdleState()||(this.lastIdleTime=Date.now(),this.status=d.idle,this.dispatchEvent(new Event(o.Idle)))}isThrottlingIdleState(){return Date.now()-this.lastIdleTime<this.minimumIdlePeriod}resetFocusStateChangeDebounceTimer(){this.focusStateChangeDebounceTimer&&(clearTimeout(this.focusStateChangeDebounceTimer),this.focusStateChangeDebounceTimer=null)}}var u=s("wx14"),h=s("q1tI"),p=s.n(h),b=s("/MKj"),g=s("FK2X"),m=s("HuPi"),v=s("emRR"),C=s("xrk1"),O=s("ZBGy"),f=s("T1Xd"),D=s("uzdi");const I=Object(D.a)();function y(){const e=I.useRecoilSnapshot();return I.setSnapShot(e),null}var j=s("QVmZ"),E=s("72hn"),T=s("ZlRg"),S=s("VaDh"),_=s("CzFt"),w=s("h0sc"),L=s("1pet"),A=s("L+5E"),M=s("UiPd"),R=s("Yi2m"),B=s("6uTC"),z=s("c51z"),k=s("sqm0"),N=s("NTw/"),F=s("XS0u"),P=s("7NAg"),V=s("7TIh");var U=s("hI9i"),$=s("paDR");var H=s("q9t1"),x=s("zgbJ"),Q=s("Jq9Z"),K=s("KwLe"),q=s("nQja");const Z=p.a.lazy((()=>s.e(42).then(s.bind(null,"TZgy")))),G=()=>p.a.createElement(p.a.Suspense,{fallback:null},p.a.createElement(Z,null));var W=s("Jq/t"),J=s("ro+J");const X=e=>{const t=Object(b.f)(),s=Object(h.useMemo)((()=>Object(O.d)(t)),[t]),n=Object(O.c)(),i=Object(b.g)((e=>({user:e.user,popup:e.popup,status:e.status,profile:e.profile,chatview:e.chatview})),((e,t)=>e.user==t.user&&e.popup==t.popup&&e.status==t.status&&e.profile==t.profile&&e.chatview==t.chatview));var r;return(e=>{const t=Object(h.useCallback)((()=>{const e=F.default.getFullDiskChatPopupNoti();let t=!0,s=!0;[P.g.FULL,P.g.ALMOST_FULL_2].includes(null==e?void 0:e.level)&&(t=!1,(null==e?void 0:e.level)===P.g.FULL&&(s={data:{tab:V.h.RES_MANAGEMENT}})),w.ModalManagerV2.openModal({windowId:"1",name:L.ModalIdentitiesDefine.SETTINGS,params:s,forceCloseAll:t})}),[]),s=Object(h.useCallback)((()=>{w.ModalManagerV2.openModal({windowId:"1",name:L.ModalIdentitiesDefine.APP_INFO,params:!0})}),[]),n=Object(h.useCallback)(((e,t)=>{var s;k.a.setFlagCopyFromCapture(!!t&&!!t.isCopyFromCap),k.a.setTimeClipboardChanged(performance.now()),null===(s=Object(N.b)())||void 0===s||s.setTimeClipboardChanged(performance.now())}),[]),i=(t,s)=>{const n=M.default.getFriendsSync();A.a.doActionWithUri(s,e,n)},r=(t,{term:s,data:n})=>{switch(s){case"id":A.a.autoOpenConversationById(n,e),n.startsWith(L.GROUPID_PREFIX)?R.default.logAction(2220801):n.startsWith(L.OA_ID_PREFIX)?R.default.logAction(2220803):R.default.logAction(2220802);break;case"phone":R.default.logAction(2220804),A.a.autoOpenConversationByPhone(n,e);break;case"username":R.default.logAction(2220805),A.a.autoOpenConversationByUsername(n,e);break;default:B.default.createError(z.a.str("STR_GROUP_NO_EXIST"))}};Object(h.useEffect)((()=>($zsub.$zuri.onNewRequest(i),$zsub.$zuri.onRequestOpenConv(r),()=>{$zsub.$zuri.removeListenNewRequest(i),$zsub.$zuri.removeListenRequestOpenConv(r)})),[e]),Object(h.useEffect)((()=>{$zsub.$zapp.onRequestShowPreference(t),$zsub.$zapp.onRequestShowAbout(s),$zsub.$zresource.onClipboardChange(n)}),[])})(s),r=s,Object($.b)($.a.Dispatch,((e,t,s)=>{r(s)})),function(e){Object($.b)($.a.Emit,((t,s,n)=>{e(n)}))}(n),p.a.createElement(g.c,Object(u.a)({emitter:n,dispatch:s},i,{shouldShowMigrateScreen:e.shouldShowMigrateScreen,shouldKeepLoadingScreenDueToStartUpPreload:e.shouldKeepLoadingScreenDueToStartUpPreload}))};function Y(e){const t=Object(U.l)(H.b,H.c,(e=>{const{status:t}=e;return Q.b.includes(t)})),s=Object(U.l)(x.c,x.b,(e=>e.shouldKeepLoadingScreen));return p.a.createElement(X,Object(u.a)({},e,{shouldShowMigrateScreen:t,shouldKeepLoadingScreenDueToStartUpPreload:s}))}const ee=e=>{const{appVersionState:t}=Object(K.a)(),{maintenanceMode:s}=Object(W.d)({});if(t===q.a.NONE)return null;const n=t===q.a.VERIFIED;return null===s?p.a.createElement(W.a,null):s?p.a.createElement(W.b,null):n?p.a.createElement(Y,e):p.a.createElement(G,null)},te=((...e)=>({children:t})=>e.reduceRight(((e,[t,s={}])=>p.a.createElement(t,s,e)),t))([b.a,{store:v.default}],[b.a,{store:_.a,context:_.b}],[b.a,{store:j.a,context:E.a}],[b.a,{store:T.a,context:S.a}],[b.a,{store:U.b,context:U.a}],[O.b],[C.c],[f.a]),se=()=>p.a.createElement(te,null,p.a.createElement(m.a,{_window:window}),p.a.createElement(y,null),p.a.createElement(J.a,null,p.a.createElement(ee,null)));var ne=s("Mgpg"),ie=s("USLQ"),re=s("XPd9"),ae=s("RoG4"),oe=s("Xb5w"),ce=s("+pQO"),de=s("TmDO"),le=s("vtBH"),ue=s("iwo6");const he=["category","label","value"],pe="zinstant-binded-content",be="zinstant-load-failed",ge="zinstant-reload",me="loading",ve="connected";var Ce,Oe=Object(re.a)("triggerRetry"),fe=Object(re.a)("retry"),De=Object(re.a)("loaded"),Ie=Object(re.a)("failed"),ye=Object(re.a)("lang"),je=Object(re.a)("debound"),Ee=Object(re.a)("zkey"),Te=Object(re.a)("data"),Se=Object(re.a)("msgId"),_e=Object(re.a)("userId"),we=Object(re.a)("extraData"),Le=Object(re.a)("onContextMenu"),Ae=Object(re.a)("onClose"),Me=Object(re.a)("windowId"),Re=Object(re.a)("zinstantEle"),Be=Object(re.a)("theme");class ze extends HTMLElement{constructor(){super(),Object.defineProperty(this,Oe,{writable:!0,value:!1}),Object.defineProperty(this,fe,{writable:!0,value:0}),Object.defineProperty(this,De,{writable:!0,value:!1}),Object.defineProperty(this,Ie,{writable:!0,value:!1}),Object.defineProperty(this,ye,{writable:!0,value:z.a.getCurrentLanguageName()}),Object.defineProperty(this,je,{writable:!0,value:null}),Object.defineProperty(this,Ee,{writable:!0,value:""}),Object.defineProperty(this,Te,{writable:!0,value:null}),Object.defineProperty(this,Se,{writable:!0,value:""}),Object.defineProperty(this,_e,{writable:!0,value:""}),Object.defineProperty(this,we,{writable:!0,value:null}),Object.defineProperty(this,Le,{writable:!0,value:null}),Object.defineProperty(this,Ae,{writable:!0,value:null}),Object.defineProperty(this,Me,{writable:!0,value:""}),Object.defineProperty(this,Re,{writable:!0,value:null}),Object.defineProperty(this,Be,{writable:!0,value:""}),this.onContextMenu&&(this.oncontextmenu=this.onContextMenu),Object(ie.a)(this,Be)[Be]=ue.a.getTheme()}connectedCallback(){var e,t,s;this.render(me),Object(ie.a)(this,Te)[Te]=this.getAttribute("data")?JSON.parse(this.getAttribute("data")):null,Object(ie.a)(this,Se)[Se]=null!==(e=this.getAttribute("msgId"))&&void 0!==e?e:"",Object(ie.a)(this,_e)[_e]=null!==(t=this.getAttribute("userId"))&&void 0!==t?t:"",Object(ie.a)(this,we)[we]=this.getAttribute("extraData")?JSON.parse(this.getAttribute("extraData")):null,Object(ie.a)(this,Me)[Me]=null!==(s=this.getAttribute("windowId"))&&void 0!==s?s:"1",z.a.callUpdate(this.updateLang.bind(this)),this.render(ve),le.b.on(de.THEME_LISTENER_EVENTS.SETTING_UPDATED,(e=>{Object(ie.a)(this,Be)[Be]=e.theme,Object(ie.a)(this,Re)[Re].setAttribute("data-theme",Object(ie.a)(this,Be)[Be])}))}disconnectedCallback(){Object(ie.a)(this,Ae)[Ae]&&Object(ie.a)(this,Ae)[Ae](),z.a.removeUpdate(this.updateLang.bind(this)),ae.c.removeUICallback&&ae.c.removeUICallback(Object(ie.a)(this,Ee)[Ee])}static get observedAttributes(){return["data","msgId","userId","extraData","windowId"]}attributeChangedCallback(e,t,s){if(t!==s)switch(e){case"data":JSON.stringify(Object(ie.a)(this,Te)[Te])!==s&&(Object(ie.a)(this,Te)[Te]=s?JSON.parse(s):null);break;case"userId":Object(ie.a)(this,_e)[_e]!==s&&(Object(ie.a)(this,_e)[_e]=s);break;case"msgId":Object(ie.a)(this,Se)[Se]!==s&&(Object(ie.a)(this,Se)[Se]=s);break;case"windowId":Object(ie.a)(this,Me)[Me]!==s&&(Object(ie.a)(this,Me)[Me]=s);break;case"extraData":Object(ie.a)(this,we)[we]=s?JSON.parse(s):null}}callbackFromZInstant(e){var t,s;let{type:n,payload:i}=e||{};switch(n){case"bindContent":if(Object(ie.a)(this,De)[De]=!0,Object(ie.a)(this,Ie)[Ie]=!1,Object(ie.a)(this,we)[we]){let e=ce.a.setMessageInfo;"function"==typeof e&&e(Object(ie.a)(this,Se)[Se],Object(ie.a)(this,we)[we])}else{let e=ce.a.removeMessageInfo;"function"==typeof e&&e(Object(ie.a)(this,Se)[Se])}this.render(pe);break;case"downloadUrlFail":this.setStatusFail();break;case"impressionTrigger":var r,a,o;if(Object.keys(i).some((e=>he.includes(e)&&null!==i[e]))&&((null===(t=Object(ie.a)(this,Te)[Te])||void 0===t?void 0:t.pcItem)||(null===(s=Object(ie.a)(this,Te)[Te])||void 0===s?void 0:s.bubbleItem)).zinstantdata_id)R.default.logActionInfoV2(R.FeaturesInfo.ZInstant,ae.a.TYPE_TRACKING.IMPRESSION,{[ae.a.TRACKING_CMD.ID]:null===(r=(null===(a=Object(ie.a)(this,Te)[Te])||void 0===a?void 0:a.pcItem)||(null===(o=Object(ie.a)(this,Te)[Te])||void 0===o?void 0:o.bubbleItem))||void 0===r?void 0:r.zinstantdata_id,[ae.a.TRACKING_CMD.WIDGET_ID]:i.widget_id,[ae.a.TRACKING_CMD.CATEGORY]:i.category,[ae.a.TRACKING_CMD.LABEL]:i.label,[ae.a.TRACKING_CMD.VALUE]:i.value});break;case"disconnectedCallback":Object(ie.a)(this,Re)[Re].remove(),Object(ie.a)(this,Re)[Re]=null,this.innerHTML=""}}set onContextMenu(e){Object(ie.a)(this,Le)[Le]=e}get onContextMenu(){return Object(ie.a)(this,Le)[Le]}set onClose(e){Object(ie.a)(this,Ae)[Ae]=e}updateLang(){Object(ie.a)(this,ye)[ye]=z.a.getCurrentLanguageName(),Object(ie.a)(this,Re)[Re]&&(Object(ie.a)(this,Re)[Re].className=`zinstant-container ${Object(ie.a)(this,ye)[ye]}`)}setStatusFail(){if(!Object(ie.a)(this,Oe)[Oe])return Object(ie.a)(this,De)[De]=!0,Object(ie.a)(this,Ie)[Ie]=!0,void this.render(be);Object(ie.a)(this,je)[je]||(Object(ie.a)(this,je)[je]=setTimeout((()=>{Object(ie.a)(this,Oe)[Oe]=!1,Object(ie.a)(this,je)[je]=null,Object(ie.a)(this,De)[De]=!0,Object(ie.a)(this,Ie)[Ie]=!0,this.render(be)}),1e3))}render(e){var t,s,n,i,r;(e===me&&(this.innerHTML=""),e===ve)?(Object(ie.a)(this,Re)[Re]||(Object(ie.a)(this,Ee)[Ee]=ae.c.bindUICallback((e=>this.callbackFromZInstant(e))),Object(ie.a)(this,Re)[Re]=document.createElement("z-instant")),Object(ie.a)(this,Re)[Re].className=`zinstant-container ${Object(ie.a)(this,ye)[ye]}`,Object(ie.a)(this,Re)[Re].setAttribute("data-uikey",Object(ie.a)(this,Ee)[Ee]),Object(ie.a)(this,Re)[Re].setAttribute("data-url",null===(t=Object(ie.a)(this,Te)[Te])||void 0===t||null===(s=t.pcItem)||void 0===s?void 0:s.data_url),Object(ie.a)(this,Re)[Re].setAttribute("data-retry",Object(ie.a)(this,fe)[fe]),Object(ie.a)(this,Re)[Re].setAttribute("data-msg",Object(ie.a)(this,Se)[Se]),Object(ie.a)(this,Re)[Re].setAttribute("data-local",oe.a.getFilePathFromUrl(null===(n=Object(ie.a)(this,Te)[Te])||void 0===n||null===(i=n.pcItem)||void 0===i?void 0:i.data_url,Object(ie.a)(this,_e)[_e])),Object(ie.a)(this,Re)[Re].setAttribute("data-zns",JSON.stringify(null===(r=Object(ie.a)(this,Te)[Te])||void 0===r?void 0:r.pcItem)),Object(ie.a)(this,Re)[Re].setAttribute("data-theme",Object(ie.a)(this,Be)[Be]),Object(ie.a)(this,Re)[Re].setAttribute("data-locale",Object(ie.a)(this,ye)[ye]),Object(ie.a)(this,Re)[Re].oncontextmenu=this.onContextMenu,this.appendChild(Object(ie.a)(this,Re)[Re])):e===pe||(e===be?(Object(ie.a)(this,Re)[Re].remove(),Object(ie.a)(this,Re)[Re]=null,this.innerHTML=""):e===ge&&(Object(ie.a)(this,Re)[Re].remove(),Object(ie.a)(this,Re)[Re]=null,this.innerHTML="",setTimeout((()=>{this.render(ve)}),1e3)))}}customElements.define("z-instant-anywhere",ze);let ke=Object(n.injectable)()(Ce=function(e,t){return Object(n.inject)(r.a)(e,void 0,0)}(Ce=function(e,t){return Object(n.inject)(ne.ZLoggerFactory)(e,void 0,1)}(Ce=Reflect.metadata("design:type",Function)(Ce=Reflect.metadata("design:paramtypes",[void 0===r.a?Object:r.a,void 0===ne.ZLoggerFactory?Object:ne.ZLoggerFactory])(Ce=class extends a.a{constructor(e,t){super("zalo",e,t,{component:se,container:document.getElementById("app")})}async start(){this.setupIdleDetector(),await super.start()}getUserID(){var e;return(null===(e=this.getSession())||void 0===e?void 0:e.userId)||""}setupIdleDetector(){const e=this.config.get("idle_detector"),t=new l(e);t.addEventListener(o.Idle,(()=>{this.setStateToIdle()})),t.addEventListener(o.Active,(()=>this.setStateToActive())),t.start(),this.disposables.add((()=>t.stop())),document.hasFocus()?this.setStateToActive():this.setStateToIdle()}})||Ce)||Ce)||Ce)||Ce)||Ce;n.ModuleContainer.registerSingleton(i.a,ke)},KwLe:function(e,t,s){"use strict";var n=s("q1tI"),i=s("jDHv"),r=s("ODpZ"),a=s("nQja");t.a=()=>{const[e,t]=Object(n.useState)(a.a.NONE);return Object(n.useEffect)((()=>{{const e=i.ModuleContainer.resolve(r.a).checkAppVersion();t(e)}}),[]),{appVersionState:e}}},ODpZ:function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("jDHv");const i=Object(n.define)("app-version-manager")},Ppsz:function(e,t,s){"use strict";var n=s("jDHv"),i=s("hmll"),r=s("1pet"),a=s("NL/6");const o=[{chord:`${r.CmdOrCtrl}${r.K_I}`,commandId:a.a.FOCUS_MAIN_CHAT_INPUT_AT_ACTIVE_WINDOW,commandTitle:"",isMatchedContext:(e,t)=>!0},{chord:`${r.CmdOrCtrl}${r.K_I}`,commandId:a.a.APPLY_ITALIC_STYLE_FOR_SELECTED_TEXT,commandTitle:"",isMatchedContext:(e,t)=>!0},{chord:`${r.CmdOrCtrl}${r.K_B}`,commandId:a.a.APPLY_BOLD_STYLE_FOR_SELECTED_TEXT,commandTitle:"",isMatchedContext:(e,t)=>!0},{chord:`${r.CmdOrCtrl}${r.K_U}`,commandId:a.a.APPLY_UNDERLINE_STYLE_FOR_SELECTED_TEXT,commandTitle:"",isMatchedContext:(e,t)=>!0},{chord:`${r.CmdOrCtrl}${r.Shift}${r.K_X}`,commandId:a.a.TOGGLE_RTF_MODE,commandTitle:"",isMatchedContext:(e,t)=>!0}];n.ModuleContainer.register(i.a,class{constructor(){this._keybindings=[],o.forEach((e=>{this._keybindings.push({chord:e.chord,commandId:e.commandId,commandTitle:e.commandTitle,isMatchedContext:e.isMatchedContext,eventHandlers:[]})}))}registerEventHandlerByCommandId(e,t){return e&&t?(this._keybindings.forEach((s=>{s.commandId!==e||s.eventHandlers.includes(t)||s.eventHandlers.push(t)})),()=>{this._keybindings.forEach((s=>{s.commandId===e&&s.eventHandlers.includes(t)&&(s.eventHandlers=s.eventHandlers.filter((e=>e!==t)))}))}):()=>{}}loopkupKeybindingByCommandId(e){return e?this._keybindings.reduce(((t,s)=>(e===s.commandId&&t.push(s),t)),[]):[]}loopkupKeybindingByChord(e){return e?this._keybindings.reduce(((t,s)=>(e===s.chord&&t.push(s),t)),[]):[]}});var c=s("XRso"),d=s("Xt6Q");n.ModuleContainer.register(c.a,class{buildChord(e){let t="";return e&&this._isChord(e)&&((e.ctrlKey||e.metaKey)&&(t+=r.CmdOrCtrl),e.shiftKey&&(t+=r.Shift),e.altKey&&(t+=r.Alt),t+=e.keyCode||e.which),t}buildKeybindingContext(e,t){return e&&t?`${e}#${t}`:""}getChordByCommandId(e){return e===a.a.TOGGLE_RTF_MODE?(Object(d.d)()?"Cmd":"Ctrl")+" + Shift + X":""}_isOnlyModifier(e){return["Shift","Control","Alt","Meta"].includes(e.key)}_isOnlyNonModifier(e){return!(e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)}_isChord(e){return!(this._isOnlyModifier(e)||this._isOnlyNonModifier(e))}})},WrSY:function(e,t,s){"use strict";s("EmOc"),s("ezdo"),s("KdAX"),s("mzek"),s("aBYf"),s("zm+Q"),s("WSI5"),s("v/rv"),s("nAZb"),s("c0KM"),s("zheM"),s("CXIs"),s("cZjg");var n=s("YrRS");Object(n.b)()},Ws6j:function(e,t,s){"use strict";s("Of9+");var n,i=s("8/YW"),r=s("0B28"),a=s("YEoC"),o=s("X2RP"),c=s("ggcH"),d=s("rvru"),l=s("jDHv"),u=s("rkiK"),h=s("Mk04"),p=s("PoHQ"),b=s("DOOx"),g=s("Yggq"),m=s("HWGt");(new(Object(i.h)()(n=class extends m.a{constructor(...e){super(...e),this.dbQos=null,this.signalDisableCreatingBackup=Object(h.a)((e=>{r.a.getInstance().disableCreatingBackup(e)})),this.signalEnableCreatingBackupForIDB=Object(h.a)((()=>{r.a.getInstance().enableCreatingBackup(a.a.IDB)})),this.signalOutOfMem=Object(h.a)((()=>{p.p.triggerEvent(p.o,[{type:b.b.OUT_OF_MEM,src:b.a.DB}])})),this.signalInvalidVersion=Object(h.a)((()=>{$zdb.notifyOpenDBFailed(!0,"VersionError")})),this.signalMissingStore=Object(h.a)((()=>{$zdb.notifyOpenDBFailed(!0,"zkey-miss-object-store")})),this.signalExceedingLimitInReopeningDBConnection=Object(h.a)((()=>{$zdb.notifyOpenDBFailed(!1)})),this.signalDBClosedAbnormally=Object(h.a)((()=>{l.ModuleContainer.resolve(c.TDBCorruptionDetector).forceCheckDBCorruption()}))}getDBQos(){return null===this.dbQos&&(this.dbQos=l.ModuleContainer.resolve(d.a)),this.dbQos}handleQueryError(e){this.getDBQos().sendDBErrorQos(e)}handleOutOfMemError(e){this.signalOutOfMem(),this.signalDisableCreatingBackup(e.adapterType)}handleInvalidVersionError(){this.signalInvalidVersion()}handleMissingStoreError(e){const{database:t,missingTables:s,adapterType:n}=e;this.signalMissingStore(),this.signalDisableCreatingBackup(n);this.getDBQos().sendMissingTableQos(t,s)}handleExceedingLimitInReopeningDBConnection(e){this.signalExceedingLimitInReopeningDBConnection(),this.signalDisableCreatingBackup(e.adapterType)}handleQueryExec(e){const{database:t,table:s,method:n,transaction:i,startTime:r,getEndTime:a}=e;g.a.has(t)||a().then((e=>{const a={method:n,database:t,table:s,transaction:i};u.default.recordInfo(u.MetricName.query_resolution_time,{startAt:r,endAt:e,info:a})})).catch((e=>{}))}handleSuccessOpenDB(e){const{startTime:t,endTime:s,fullname:n,adapterType:i}=e;this.getDBQos().sendSuccessOpenDBDurationQos(n,t,s-t),u.default.recordInfo(u.MetricName.db_ready,{startAt:t,endAt:s,info:{dbName:n}}),i===a.a.IDB&&this.signalEnableCreatingBackupForIDB()}handleConnectionClosedAbnormally(){this.signalDBClosedAbnormally()}handleSchemaMigratedAbnormally(){}handleLongOpenDB(e){const{startTime:t,endTime:s,fullname:n}=e;this.getDBQos().sendLongOpenRequestQos(n,t,s-t)}handleTimeConsumingQuery(e,t){this.getDBQos().sendTimeConsumingQueryQos(e,t)}handleWarning(e){const t=this.getDBQos();if(e.type===o.b.FAILED_MULTI)t.sendFailedMultiErrorQos(e)}onDispose(){this.dispose()}})||n)).start()},bO0B:function(e,t,s){"use strict";s("v5OU")},daJc:function(e,t,s){"use strict";var n=s("jDHv"),i=s("OMsT"),r=s("XS0u"),a=s("Rw5y"),o=s("IpzU"),c=s("7FSS"),d=s("xOOu"),l=s.n(d),u=s("5FGm");const h=/^(((main|login|photo|render|shared-worker|preload-shared-worker|u-process-sqlite|preload-sqlite|zalo|zcall|scrshot|compact-app|main-compact-app|zlog-config|cloud-.*|migrate-log)\.(zlog|log|module|meta|dmeta|calf|txt|json))|(voip\.old|voip)\.log|((zavi|crash)\.dmp))|(DNetLog_\d+\.log)$/;var p;const b=$znode.fs,g=$znode.path,m=$znode.os;let v=Object(n.injectable)()(p=class{constructor(){this.appdataFolder=null}clientDeviceInfo(){const e=m.platform(),t=m.release(),s=m.hostname(),n=m.type();return JSON.stringify({name:s,model:n,os:e,osVersion:t,build:"production-release",pversion:"25.8.1",bhash:"c91d4c341c1722d4c0e9d739f3726dfb45e36876"})}async getLogDir(){return this.appdataFolder||(this.appdataFolder=await Object(o.getuserDataDir)()),this.appdataFolder}async prepareLogBlob(e){return new Promise(((t,s)=>{let n="";this.getLogDir().then((e=>{const t=u.b;n=g.join(e,t);return{main:{fn:a.a,args:[{fs:b},n]},other:{fn:$zFileManager.scandirLog,args:[n]}}.other})).then((e=>e.fn(...e.args))).then((t=>{var s,i;let r=[],a=[];return a=t.filter((e=>{const t=h.test(e),s=e.endsWith(".zlog")||e.endsWith(".calf")||e.endsWith(".module")||e.endsWith(".meta")||e.startsWith("DNetLog_")&&h.test(e);return!!h.test(e)&&(t&&s)})).map((e=>g.join(this.appdataFolder,e))),a.push(...e.extraFiles),a.forEach((e=>{r.push(this.readFile(e))})),r=(null===(s=a)||void 0===s?void 0:s.map((e=>this.readFile(g.join(n,e)))))||[],null==e||null===(i=e.extraFiles)||void 0===i||i.forEach((e=>{var t;r.push((t=e,new Promise((e=>{$zFileManager.getExtraLogFiles(t).then((s=>{e({name:g.basename(t),data:s})})).catch((s=>{e({name:g.basename(t),data:new ArrayBuffer(0)})}))}))))})),r})).then((e=>Promise.all(e))).then((e=>{const t=new l.a;e.forEach((e=>{e&&e.data.byteLength>0&&t.file(e.name,e.data)}));{const e="device.zinfo",s=new TextEncoder;t.file(e,s.encode(this.clientDeviceInfo()).buffer)}return t.generateAsync({type:"arraybuffer",compression:"DEFLATE"})})).then((s=>{let n=e.viewerKey;if(!n){n=r.default.getLastViewKey()||"";try{var i;n=null===(i=n)||void 0===i?void 0:i.split(".")[0]}catch{}}const a=`zlog_${n}_25.8.1-production_${Date.now()}.zip`;if(e.bareContent)t({name:a,data:new Uint8Array(s)});else{const e=new Blob([new Uint8Array(s)]);e.name=a,t(e)}})).catch((e=>{c.a.error("[ZLL]: failed to prepare log for sending log",e),s(e)}))}))}async readFile(e){const t=g.basename(e);let s;try{s=await $zFileManager.readZLog(t)}catch(n){s=new ArrayBuffer(0)}return{name:t,data:s}}})||p;n.ModuleContainer.registerSingleton(i.a,v)},fNRA:function(e,t,s){"use strict";var n,i=s("8/YW"),r=s("Hw41"),a=s("YEoC"),o=s("PmZf"),c=s("bSii"),d=s("tHMN"),l=s("d/or"),u=s("1UUk"),h=s("jDHv"),p=s("xM06"),b=s("8eps"),g=s("fsN4"),m=s("Mgpg"),v=s("PObO");let C=Object(i.h)()(n=h.ModuleContainer.injectable()(n=function(e,t){return h.ModuleContainer.inject(d.b)(e,void 0,0)}(n=function(e,t){return h.ModuleContainer.inject(l.a)(e,void 0,1)}(n=function(e,t){return h.ModuleContainer.inject(m.ZLoggerFactory)(e,void 0,2)}(n=Reflect.metadata("design:type",Function)(n=Reflect.metadata("design:paramtypes",[void 0===d.a?Object:d.a,void 0===l.a?Object:l.a,void 0===m.ZLoggerFactory?Object:m.ZLoggerFactory])(n=class extends u.a{constructor(e,t,s){super(),this.engine=e,this.settingsManager=t,this.logger=void 0,this.removeListeners=()=>{},this.logger=s.createZLogger("db",["host"]),this.registerListeners()}registerListeners(){const e=e=>this.dispatchEvent(e),t=[];t.push(this.engine.addEventListener(o.b.UnexpectedError,e)),t.push(this.engine.addEventListener(o.b.QueryExec,e)),t.push(this.engine.addEventListener(o.b.QueryError,e)),t.push(this.engine.addEventListener(o.b.SuccessOpenDB,e)),t.push(this.engine.addEventListener(o.b.LongOpenDB,e)),t.push(this.engine.addEventListener(o.b.TimeConsumingQuery,e)),t.push(this.engine.addEventListener(o.b.ConnectionClosedAbnormally,e)),t.push(this.engine.addEventListener(o.b.SchemaMigratedAbnormally,e)),t.push(this.engine.addEventListener(o.b.Warning,e)),t.push(this.addEventListener(o.b.SessionChange,(()=>{Object(c.c)(!1)}))),this.removeListeners=()=>t.forEach((e=>e()))}onDispose(){this.removeListeners()}removePartitionKeyTableMapping(){Object(c.b)()||this.engine.deleteDatabase("Meta").then((()=>{Object(c.c)(!0)})).catch((e=>{this.logger.zsymb(18,"9kW-tP","Failed to remove partition key table mapping",e)}))}install(){$zsub.$zdb.onRequestCloseDbs((async(e,t)=>{this.logger.zsymb(0,"YMVXW0","closing requested databases ..."),await this.closeDBsForThisScript(t),$zdb.notifyFinishCloseDb(__ZaBUNDLENAME__),this.logger.zsymb(0,"9Qmxc1","closed database")})),$zdb.notifyDbConnected(__ZaBUNDLENAME__)}areYouOk(){return!0}authenticate(e){if($zdb.authenticateDb(e),e){this.session=e,this.dispatchEvent(new o.g(e)),this.engine.authenticate(e),this.logger.zsymb(0,"b9EItP",(()=>["authenticated",`id: ${e.userId}`]));h.ModuleContainer.resolve(v.a).authenticate(e)}}async closeDBsForThisScript(e,t){const s=g.default.getInstance(),n=this.logger;let i=[];if(e){if(e.length){let r=[...e];n.zsymb(3,"7bteIm",["Start closing dbs: {}","CF4j9z"],e),n.zsymb(3,"6BRK2s",["Wait for dbs to be closed: {}","-p6VXg"],r),i=e.map((async e=>{let i=s[e];if(void 0===i){const t=h.ModuleContainer.resolve(b.a).getValue().Meta;if(t.databaseName!==e)return void n.zsymb(21,"ea7YhC",["Can't close invalid db: {}","rkOdIs"],e);i=t}await i.closeThisDatabase(t),r=r.filter((t=>t!==e)),0===r.length?n.zsymb(0,"RD8Wmg","Done closing dbs"):n.zsymb(3,"o49GmN",["Wait for dbs to be closed: {}","-p6VXg"],r)}))}}else i=[s.closeAllDatabases(t)];await Promise.all(i)}async signalCloseDBs(e,t){var s;this.logger.zsymb(0,"wklsEF","send closing requested databases signal"),null!==(s=window.$zenv)&&void 0!==s&&s.isPreloaded&&(await $zdb.requestCloseDbs(e,__ZaBUNDLENAME__,t),this.logger.zsymb(0,"waUPt3","All clients have finished closing the requested DBs"))}async closeDBs(e,t){void 0===e?this.logger.zsymb(0,"vGJmk3","close all databases"):this.logger.zsymb(3,"j3wD9a",["close the following database: {}","zb0Ocg"],e);const s=(await this.settingsManager.getInUseAdaperTypes()).map((async s=>{try{if(s===a.a.IDB)return this.signalCloseDBs(e,t);if(s===a.a.SQLite)return e?this.signalCloseDBs(e,t):this.signalSQLiteProcessToCloseAllDBs()}catch(n){this.logger.zsymb(21,"NbfI2E",["error close database: {}","GXso_d"],n)}}));await Promise.all(s)}migrateData(e,t){throw new Error("Medthod not implement")}async signalSQLiteProcessToCloseAllDBs(){const e={typeID:p.j,data:{type:p.e,data:{}}},t=h.ModuleContainer.resolve(r.b),s=await t.getPort();await s.invokeMessage(e)}})||n)||n)||n)||n)||n)||n)||n;h.ModuleContainer.registerSingleton(u.b,C)},jw3m:function(e,t,s){},mneU:function(e,t,s){"use strict";var n=s("Y65e"),i=s("jDHv"),r=s("8/YW"),a=s("+ExH"),o=s("ycTR"),c=s("wH4e"),d=s("Mgpg"),l=s("CDcE"),u=s("ODpZ"),h=s("nQja"),p=s("rkiK");var b=s("QrVG");class g{constructor(e){this.versionConfigs=void 0,this.versionConfigs=e||[]}getConfigList(){return this.versionConfigs}getConfigByDbName(e){return this.versionConfigs.find((t=>t.name===e))}serialize(){return this.versionConfigs.length?JSON.stringify(this.versionConfigs):""}toString(){return this.versionConfigs.map((e=>`${e.name}::${e.version}`)).join(" | ")}static deserialize(e){try{let t=[];const s=JSON.parse(e);return null!=s&&s.length&&s.forEach((e=>{null!=e&&e.name&&Number.isInteger(Number(e.version))&&t.push({name:e.name,version:Number(e.version)})})),new this(t)}catch(t){}return new this}}var m,v,C,O,f,D,I,y,j,E;m=Object(r.j)(),v=Object(r.h)(),C=Object(i.singleton)(u.a),O=Reflect.metadata("design:type",Function),f=Reflect.metadata("design:paramtypes",[]),D=p.MetriczMessenger.invoker("appVersionManager.saveLastUsedInfo"),I=Reflect.metadata("design:type",Function),y=Reflect.metadata("design:paramtypes",[Number,String]),m(j=v(j=C(j=O(j=f((E=class{constructor(){this._logger=void 0,this.currentDbVersion=void 0,this.appVersionState=void 0}async requestUpdateLastUsedAppVersionInfo(e,t){return[e,t]}async onStart(){if(null==this.appVersionState&&(this.appVersionState=this.verifyAppVersion(),this.afterVerifyAppVersion()),this.appVersionState===h.a.VERIFIED){this.currentDbVersion||(this.currentDbVersion=this.getCurrentDBVersion());try{await this.requestUpdateLastUsedAppVersionInfo(4,this.currentDbVersion.serialize()),this.logger.zsymb(0,"5TVoPs",`save app version success. majorVersion 4; dbVersion ${this.currentDbVersion.toString()}`)}catch(e){this.logger.zsymb(18,"mO4a5C",`failed on save app version state. ERR ${Object(l.e)(e)}`)}}}onDispose(){}checkAppVersion(){return null==this.appVersionState&&(this.appVersionState=this.verifyAppVersion(),this.afterVerifyAppVersion()),this.appVersionState}verifyAppVersion(){const e=b.a.lastUsedMajorVersion,t=b.a.lastUsedDbVersion?g.deserialize(b.a.lastUsedDbVersion):null;if(!(!e||e<=4))return this.logger.zsymb(18,"qW-PM2",`verifyAppVersion: detect old major version. current 4; lastUsed ${e}`),h.a.OLD_MAJOR_VERSION;if(!t)return this.logger.zsymb(0,"0y6gXc","verifyAppVersion: VALID. no previous db version."),h.a.VERIFIED;this.currentDbVersion||(this.currentDbVersion=this.getCurrentDBVersion());return this.verifyDbVersion(t,this.currentDbVersion)?(this.logger.zsymb(0,"6ojh0i",`verifyAppVersion: VALID. lastUsedMajorVersion ${e}; lastUsedDbVersion ${t.toString()}`),h.a.VERIFIED):(this.logger.zsymb(18,"at1T7I",`verifyAppVersion: detect old DB version. current ${this.currentDbVersion.toString()}; lastUsed ${t.toString()}`),h.a.OLD_DB_VERSION)}afterVerifyAppVersion(){}verifyDbVersion(e,t){for(const s of t.getConfigList()){const t=e.getConfigByDbName(s.name);if(t&&t.version>s.version)return this.logger.zsymb(18,"NGUzn4",`verifyDbVersion: old DB version. dbName ${s.name}; current ${s.version}; lastUsed ${t.version}`),!1}return!0}get logger(){return this._logger||(this._logger=i.ModuleContainer.resolve(d.ZLoggerFactory).createZLogger("app-version",["manager"])),this._logger}getCurrentDBVersion(){const e=Object.values(a.a).map((e=>e.baseConfig.name)),t=[];e.forEach((e=>{const s=Object(o.a)(e,c.a.SQLite);s&&t.push({name:e,version:s.version})}));return new g(t)}},Object(n.a)(E.prototype,"requestUpdateLastUsedAppVersionInfo",[D,I,y],Object.getOwnPropertyDescriptor(E.prototype,"requestUpdateLastUsedAppVersionInfo"),E.prototype),j=E))||j)||j)||j)||j)},nQja:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));let n=function(e){return e.VERIFIED="VERIFIED",e.OLD_MAJOR_VERSION="OLD_MAJOR_VERSION",e.OLD_DB_VERSION="OLD_DB_VERSION",e.NONE="NONE",e}({})},o0oJ:function(e,t,s){(function(e){const t={};function s(e){return t[e]||(t[e]=0),t[e]+=1,100*e+t[e]}if(!e.perf){let t=()=>Date.now();const n={STARTUP:s(1),MIGRATION_DONE:s(2),MAIN_SCRIPT:s(2),LOADED_MAIN_SCRIPT:s(3),MAIN_APP_READY:s(3),LOADED_STARTUP_SCRIPT:s(2),STARTUP_BEFORE_HEAVY:s(3),CREATE_MAIN_WINDOW:s(3),SHOW_MAIN_WINDOW:s(3),MAIN_WINDOW_LOADING:s(3),MAIN_WINDOW_LOADED:s(3),APP_STARTUP:s(2),LOAD_APP_SCRIPT:s(3),APP_DID_MOUNT:s(3),CHATBOX_DID_MOUNT:s(3),SELECT_CONVERSATION:s(1),SELECTED_CONVERSATION:s(2)};e.perf={...n,perfRecords:[],record:s=>{s||(s=0);const n=[s,t()];e.perf.perfRecords.push(n)}}}}).call(this,s("yLpj"))},szdT:function(e,t,s){"use strict";var n,i=s("8/YW"),r=s("nMWc"),a=s("jDHv");let o=Object(i.h)()(n=Reflect.metadata("design:type",Function)(n=Reflect.metadata("design:paramtypes",[])(n=class extends r.a{constructor(){super(),this.disposeEventListeners=()=>{},this.setUpEventListeners()}setUpEventListeners(){const e=[];{const t=(e,t)=>{this.updateEventMapOnStartIdleEvent(t);for(const s of this.startIdleListeners)s(t)};$zsub.$zapp.onStartIdle(t),e.push((()=>{$zsub.$zapp.removeListenStartIdle(t)}))}{const t=e=>{this.updateEventMapOnEndIdleEvent();for(const t of this.endIdleListeners)t()};$zsub.$zapp.onEndIdle(t),e.push((()=>{$zsub.$zapp.removeListenEndIdle(t)}))}this.disposeEventListeners=()=>{for(const t of e)t()}}registerIdleCheckInterval(e){$zapp.registerIdleCheckInterval(e)}onDispose(){this.disposeEventListeners()}preload_onIdleCheckIntervalRegistered(e,t){throw new Error("Method not implemented.")}})||n)||n)||n;a.ModuleContainer.registerSingleton(r.b,o)},tPRg:function(e,t,s){"use strict";s("o0oJ"),s("dThN"),s("z0WU"),s("vSga"),s("XS0u");perf.record(perf.LOAD_APP_SCRIPT),function(){window.__loadTimer&&clearTimeout(window.__loadTimer);window.__startTime&&$zlogger.loadShellQos(Date.now()-window.__startTime)}()},vUp1:function(e,t,s){"use strict";var n,i=s("VTBJ"),r=s("JTyQ"),a=s("hI9i"),o=s("rCQs"),c=s("rfrl"),d=s("7nHs");const l={isShown:!1,modalTitle:"",guideTitle:"",errorCode:"",guideItems:[],showPrimaryBtn:!0,primaryBtnName:"STR_BU_CONFIRM_TEXT_6",showSecondaryBtn:!0,secondaryBtnName:"STR_BU_CANCEL_TEXT_6",adapterType:r.b};Object(o.b)(d.a)(n=class{constructor(){this.name=d.b,this.key="",this.state=l}setState(e){const t=Object(c.a)(this.state,e);this.state!==t&&(this.state=t,Object(a.h)(this.name,""))}showModal(e){this.state.isShown||this.setState((t=>Object(i.a)(Object(i.a)(Object(i.a)({},t),e),{},{isShown:!0})))}closeModal(){this.state.isShown&&this.setState((e=>Object(i.a)(Object(i.a)(Object(i.a)({},e),l),{},{isShown:!1})))}init(e){}getItem(e,t){return this.state}getList(e,t){return[]}onGetItemFailure(e,t){throw new Error("Method not implemented.")}onGetListFailure(e,t){throw new Error("Method not implemented.")}})},xRjI:function(e,t,s){"use strict";class n{static getInstance(){return void 0===n._instance&&(n._instance=new n),n._instance}constructor(){if(this.menuConditionCheckers=new Map,this.menuCommandHandlers=new Map,n._instance)throw new Error("Singleton classes can't be instantiated more than once.");return n._instance=this,n._instance}getConditionChecker(e){return this._getConditionalChecker(e)}getCommandHandler(e){return this._getCommandHandler(e)}registerCondition(e,t){this._hasConditionalChecker(e),this._setConditionalChecker(e,t)}registerCommand(e,t){this._setCommandHandler(e,t)}_hasConditionalChecker(e){return this.menuConditionCheckers.has(e)}_getConditionalChecker(e){return this.menuConditionCheckers.get(e)}_getCommandHandler(e){return this.menuCommandHandlers.get(e)}_setConditionalChecker(e,t){this.menuConditionCheckers.set(e,t)}_setCommandHandler(e,t){this.menuCommandHandlers.set(e,t)}}n._instance=void 0;n.getInstance()},xir9:function(e,t,s){"use strict";var n=s("jDHv"),i=s("fc/q"),r=s("PoHQ");n.ModuleContainer.registerSingleton(i.b,class{log(e){r.p.triggerEvent(r.i,[{commandId:e.commandId,success:!0===e.success,subCommandId:e.subCommandId||0,duration:e.duration||0,errorCode:e.errorCode||0,startTime:e.startTime||Date.now(),params:e.params}])}})},zgbJ:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return a}));var n=s("jDHv");const i="o2o",r="o2o/ui",a=Object(n.define)(i)}}]);
//# sourceMappingURL=../sourcemaps/lazy/default-login-startup-main-startup.c2fc24ff9a70135036e3.js.map